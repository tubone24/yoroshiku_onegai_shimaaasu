<!DOCTYPE html>
<html>
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/ fb# prefix属性: http://ogp.me/ns/ prefix属性#">
    <meta charset="utf-8">
    <meta property="og:url" content="https://tubone24.github.io/yoroshiku_onegai_shimaaasu/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:title" content="よろしくお願いしまぁぁぁすっ!!"/>
    <meta property="og:description" content="健二くんが解いた暗号と多分同じ種類のRSA暗号を解読してみましょう"/>
    <meta property="og:site_name" content="よろしくお願いしまぁぁぁすっ!!"/>
    <meta property="og:image" content="https://i.imgur.com/3bry1E0.jpg"/>
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:url" content="https://tubone24.github.io/yoroshiku_onegai_shimaaasu/"/>
    <meta name="twitter:title" content="よろしくお願いしまぁぁぁすっ!!"/>
    <meta name="twitter:site" content="@meitante1conan"/>
    <meta
            name="twitter:description"
            content="健二くんが解いた暗号と多分同じ種類のRSA暗号を解読してみましょう"
    />
    <meta name="twitter:image" content="https://i.imgur.com/3bry1E0.jpg"/>
    <meta property="fb:app_id" content="280941406476272"/>
    <link rel="canonical" href="https://tubone24.github.io/yoroshiku_onegai_shimaaasu/"/>
    <link rel="icon" href="/favicon.ico"/>
    <link rel="stylesheet" href="index.css">
</head>
<body>
<script>
  function checkEncPlainTextForm($this) {
    var str = $this.value;
    while (str.match(/[^A-Z ]/)) {
      str = str.replace(/[^A-Z ]/, "");
    }
    $this.value = str;
  }

  function checkNumberForm($this) {
    var str = $this.value;
    while (str.match(/[^0-9]/)) {
      str = str.replace(/[^/0-9]/, "");
    }
    $this.value = str;
  }
</script>
<script type="module">
  document.querySelector('#yoroshiku').addEventListener('click', buttonClickYoroshiku);
  document.querySelector('#enc').addEventListener('click', buttonClickEnc);

  function buttonClickYoroshiku() {
    const spinner = document.getElementById('loading');
    spinner.classList.remove("loaded");
    const e = document.getElementById("e").value;
    const c = document.getElementById("c").value;
    const n = document.getElementById("n").value;
    const cheat = document.getElementById("cheat").checked;
    init()
      .then(() => {
        if (cheat) {
          calc(e, c, n, "yes");
        } else {
          calc(e, c, n, "cheat");
        }
      });
  }

  function buttonClickEnc() {
    const spinner = document.getElementById('loading');
    spinner.classList.remove("loaded");
    const e = document.getElementById("e").value;
    const enc_plain_text = document.getElementById("enc_plain_text").value;
    const n = document.getElementById("n").value;
    init()
      .then(() => {
        create_crypt_num(e, n, enc_plain_text);
      });
  }

  import init, {calc, create_crypt_num} from "./pkg/summer_wars_crypt.js";
</script>
<div class="bgImage">
    <h1>よろしくお願いしまぁぁぁすっ!!</h1>
    <h2><a href="https://developer.mozilla.org/ja/docs/WebAssembly" target="_blank" rel="noopener noreferrer">WebAssembly</a>を使って健二くんの凄さを体感しよう！
    </h2>
    <p>健二くんが解いた暗号と多分同じ種類のRSA暗号を解読してみましょう</p>
    <p><font size="6" color="#dc143c">※普通のPCじゃ絶対解けないのでブラウザーがクラッシュしそうになったらすぐにタブを閉じましょう※</font></p>
    <p>
        nの素因数分解には<a
            href="https://ja.wikipedia.org/wiki/%E3%83%9D%E3%83%A9%E3%83%BC%E3%83%89%E3%83%BB%E3%83%AD%E3%83%BC%E7%B4%A0%E5%9B%A0%E6%95%B0%E5%88%86%E8%A7%A3%E6%B3%95"
            target="_blank" rel="noopener noreferrer">ポラード・ロー素因数分解法</a>を使ってます<br/>
        ですが、ご家庭のPCでは性能的に絶対解けないのであらかじめ素数pに限りなく近づいている状態を初期値とする<b>数学オリンピックチート</b>を用意しました
    </p>
    d(秘密鍵)の計算の手順は<a href="https://ja.wikipedia.org/wiki/RSA%E6%9A%97%E5%8F%B7" target="_blank"
                    rel="noopener noreferrer">RSA暗号</a>をご参照ください<br/>
    <p>これらの計算は<a href="https://github.com/rustwasm/wasm-bindgen" target="_blank"
                 rel="noopener noreferrer">wasm-bindgen</a>を使ってWasmで計算処理をさせるようにしてますが、Rustなんてほとんど書かないので無駄がいっぱいあると思います</p>
    <p>計算結果はconsole logに出てきますので、<kbd>F12</kbd>から開発者ツールを開くと計算している様子が楽しめると思います</p>
    <small>※本ホームページの利用により発生した利用者の損害全てに対し、いかなる責任をも負わないものとし、損害賠償をする一切の義務はないものとします</small>
    <hr/>
    public exponent（公開指数）<br/>
    <small>適当な正の整数を指定。公開鍵に入れて暗号化の際<img src="http://chart.apis.google.com/chart?cht=tx&chl=c%3Dm%5Eemod%20%5Cquad%20n">という具合で暗号化文字列を作るよ
    </small>
    <br/>
    <input type="text" id="e" value="9007" onInput="checkNumberForm(this)"><br/><br/>
    cypher (暗号文字列)<br/>
    <small>暗号化された文字列。こんなの見ても何にもわからないね！！</small>
    <br/>
    <textarea rows="10" cols="60" id="c" onInput="checkNumberForm(this)">96869613754622061477140922254355882905759991124574319874695120930816298225145708356931476622883989628013391990551829945157815154</textarea><br/><br/>
    RSA-module（法）<br/>
    <small>2つの巨大な素数<img src="http://chart.apis.google.com/chart?cht=tx&chl=p">, <img
            src="http://chart.apis.google.com/chart?cht=tx&chl=q">の積だよ。これだけの桁数になると君たちのゲーミングPCを持っても計算できないくらいの計算量になってしまうのでOZのパスワードも安心だね
    </small>
    <br/>
    <small><font size="1">都合(数学オリンピックチート機能)によりnは固定とさせていただいております。ただtextareaをreadonlyにしているだけなのでハックしたい人は開発者ツールからどうぞ</font>
    </small>
    <br/>
    <textarea rows="10" cols="60" id="n" readonly>114381625757888867669235779976146612010218296721242362562561842935706935245733897830597123563958705058989075147599290026879543541</textarea><br/><br/>
    <label><input type="checkbox" id="cheat" value="yes" checked>数学オリンピックチート(健二くんのように一瞬で素因数分解ができるチート)</label><br/><br/>
    </form>
    <input type="button" id="yoroshiku" value="よろしくお願いしまぁぁぁすっ!!"/></div>
<br/><br/>
<div id="loading" class="loaded">
    <div class="spinner"></div>
</div>
結果<br/>
<div id="div_p">
    p=0
</div>
<small><font size="1">p: nを構成していた素数の片割れその1</font></small>
<div id="div_q">
    q=0
</div>
<small><font size="1">q: nを構成していた素数の片割れその2</font></small>
<div id="div_d">
    d=0
</div>
<small><font size="1">d: <img
        src="http://chart.apis.google.com/chart?cht=tx&chl=d%3De%5E-1%20%5Cquad%20mod%20%5Cquad%20%5Cphi">で算出することのできる秘密鍵でここでは<a
        href="https://ja.wikipedia.org/wiki/%E3%83%A6%E3%83%BC%E3%82%AF%E3%83%AA%E3%83%83%E3%83%89%E3%81%AE%E4%BA%92%E9%99%A4%E6%B3%95#%E6%8B%A1%E5%BC%B5%E3%81%95%E3%82%8C%E3%81%9F%E4%BA%92%E9%99%A4%E6%B3%95"
        target="_blank" rel="noopener noreferrer">拡張ユークリッド互除法</a>を使って求めてます (注)<img
        src="http://chart.apis.google.com/chart?cht=tx&chl=%5Cphi%20%3D%20lcm(p%20-%201%2C%20q-1)"> を表しており<img
        src="http://chart.apis.google.com/chart?cht=tx&chl=lcm(a%2Cb)">はaとbの最小公倍数を示してます</font>
</small>
<div id="div_m">
    m=0
</div>
<small><font size="1">m: 平文が数列になったやつ。本当はASCII換字で置き換えていくが作者がめんどくさくなってASCIIの内、大文字英字と半角スペースのみの対応となりました</font></small>
<b>
    <div id="div_plain_text">
        plainText=
    </div>
</b>
<small><font size="1">plainText: OZの管理権限パスワード。<font color="red">重要なシステムならもっと推測されにくい文字列使ってください!!!!</font></font></small>
<hr/>
<h3>おまけ: 暗号化ツール</h3>
<p>
    平文から暗号文を作ることができます<br/>
    ですが、作者の怠慢から文字列の指定は大文字英字+半角スペースのみです。<br/>
    色々遊んでみてください。
</p>
平文(大文字英字+半角スペース)<br/>
<textarea rows="10" cols="60" id="enc_plain_text" onInput="checkEncPlainTextForm(this)">THE MAGIC WORDS ARE SQUEAMISH OSSIFRAGE</textarea><br/>
<input type="button" id="enc" value="暗号化"/><br/><br/>
数値化<br/>
<div id="div_crypt_m">
    m=0
</div>
暗号文<br/>
<div id="div_crypt_c">
    c=0
</div>
</div>
<hr/>
<center><a href="https://blog.tubone-project24.xyz/" target="_blank" rel="noopener noreferrer">©tubone24</a></center>
</body>
</html>
